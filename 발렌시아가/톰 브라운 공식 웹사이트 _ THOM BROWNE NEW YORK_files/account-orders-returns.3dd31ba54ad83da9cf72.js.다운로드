webpackJsonp([21],{2644:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),o=(r.n(i),r(1)),a=(r.n(o),r(7)),c=r.n(a),s=r(4),l=r(6),u=r(134),d=r(3350),p=r(994),f=r(15),m=r(601),v=r(3352),g=r.n(v),h=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,i){var o=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={}),t&&o)for(var c in o)void 0===t[c]&&(t[c]=o[c]);else t||(t=o||{});if(1===a)t.children=i;else if(a>1){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+3];t.children=s}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),b=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._handleToggleViewOrder=r._handleToggleViewOrder.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["PureComponent"]),b(t,[{key:"render",value:function(){var e=this.props,t=e.isLoading,r=e.p.t;return h("div",{className:g.a.wrapper,"data-test":"orderHistoryList-container"},void 0,h(u.a,{isLoading:t,withLoader:!0},void 0,h(p.a,{min:"md"},void 0,h("div",{className:g.a.infoTitle},void 0,r("order-history"))),!t&&this.renderOrderList()))}},{key:"renderOrderList",value:function(){var e=this,t=this.props,r=t.orders,n=t.p.t;return 0===r.length?h("div",{className:g.a.emptyOrders},void 0,n("no-orders-placed")):h("div",{"data-test":"orderHistory-container"},void 0,r.map(function(t){return h(d.a,{item:t,onToggle:e._handleToggleViewOrder(t.id)},t.id)}))}},{key:"_handleToggleViewOrder",value:function(e){var t=this;return function(){t.props.localeNavigateTo("/account/order/detail?orderId="+e)}}}]),t}(),_={localeNavigateTo:f.b.localeNavigateTo};t.default=Object(l.d)(c()("account.orders"),Object(s.connect)(function(e){return{orders:Object(m.e)(e),isLoading:!Object(m.a)(e)||Object(m.a)(e).isLoading}},_))(y)},2998:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(e,t){return"cn"===t||"jp"===t||"kr"===t?e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate():e.toLocaleDateString()}},3026:function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return a});var n=r(1028),i=r(15),o=this;var a=function(t){return r=e.mark(function r(a,c,s){var l,u,d,p=s.bwApiSdk;return e.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:n.a.GET_TRACKINGS_START,payload:{trackingCodes:t}}),l=c(),u={countryCode:i.d.getCountryCodeFromSubfolder(l),currencyCode:i.d.getCurrencyCodeFromSubfolder(l)},e.next=6,p.tracking.trackings(u,t);case 6:return d=e.sent,e.abrupt("return",a({type:n.a.GET_TRACKINGS_SUCCESS,payload:{trackingCodes:t,result:d}}));case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",a({type:n.a.GET_TRACKINGS_FAIL,payload:{trackingCodes:t,error:e.t0}}));case 13:case"end":return e.stop()}},r,o,[[0,10]])}),a=function(){var e=r.apply(this,arguments);return new Promise(function(t,r){return function n(i,o){try{var a=e[i](o),c=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(c).then(function(e){n("next",e)},function(e){n("throw",e)});t(c)}("next")})},function(e,t,r){return a.apply(this,arguments)};var r,a};n.a.RESET}).call(t,r(5))},3067:function(e,t,r){"use strict";var n,i=r(0),o=(r.n(i),r(1)),a=(r.n(o),r(6)),c=r(4),s=r(7),l=r.n(s),u=r(2),d=r(3),p=r.n(d),f=r(403),m=r.n(f),v=r(134),g=r(37),h=r(3026),b=r(3068),y=r(3069),_=r.n(y),k=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,i){var o=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={}),t&&o)for(var c in o)void 0===t[c]&&(t[c]=o[c]);else t||(t=o||{});if(1===a)t.children=i;else if(a>1){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+3];t.children=s}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),w=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var O={1:function(e){return"https://wwwapps.ups.com/WebTracking/track?track=yes&trackNums="+e},2:function(e){return"http://www.dhl.com/en/express/tracking.shtml?AWB="+e+"&brand=DHL"},9:function(){return"http://www2.correios.com.br/sistemas/rastreamento/"},17:function(e){return"http://www.sf-express.com/cn/sc/dynamic_function/waybill/#search/bill-number/"+e},34:function(e){return"http://www.ecmsglobal.com/custom/tracking/?clientid=farfetch&ordernumber="+e}},C=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["PureComponent"]),w(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchTrackings,r=e.trackingCode,n=e.trackingNumberDetails;r&&!n&&t(r)}},{key:"render",value:function(){return this.props.isOrderListing?this.renderOrderListing():this.renderOrderDetails()}},{key:"renderOrderDetails",value:function(){var e=this.props,t=e.p.t,r=e.wrapperClassName,n=e.lineClassName,i=e.item,o=e.trackingCode,a=e.trackingNumberIsLoading,c=e.trackingNumberDetails,s=p()(i,"shipping.service");if(!s||!o)return null;var l=c&&c.events.length&&c.events[c.events.length-1].location,d=p()(c,"courier.id");return k(v.a,{isLoading:a,withLoader:!0,className:Object(u.a)(_.a.wrapper,r)},void 0,s.name&&k("div",{className:_.a.line},void 0,k("div",{className:_.a.lineTitle},void 0,t("courier")),k("div",{className:Object(u.a)(_.a.lineContent,n)},void 0,22===s.id?t("ups-prefix",{trackingName:s.name}):s.name)),k("div",{className:_.a.line},void 0,k("div",{className:_.a.lineTitle},void 0,t("tracking-number")),k(g.a,{className:Object(u.a)(_.a.lineContent,_.a.trackingLink,d&&_.a.underlineLink,n),to:d?O[d](o):void 0,target:"_blank"},void 0,o)),!!l&&k("div",{className:_.a.line},void 0,k("div",{className:_.a.lineTitle},void 0,t("last-location")),k("div",{className:Object(u.a)(_.a.lineContent,n)},void 0,l)))}},{key:"renderOrderListing",value:function(){var e=this.props,t=e.item,r=e.trackingCode,n=e.trackingNumberDetails,i=e.trackingNumberIsLoading,o=e.wrapperClassName;if(!p()(t,"shipping.service")||!r)return k("div",{className:_.a.emptyTracking},void 0," ","--"," ");var a=p()(n,"courier.id");return k(v.a,{isLoading:i,withLoader:!0,className:Object(u.a)(o)},void 0,!i&&k(g.a,{className:Object(u.a)(_.a.lineContent,_.a.trackingLink,_.a.listing,a&&_.a.underlineLink),to:a?O[a](r):void 0,target:"_blank"},void 0,r))}}]),t}(),N={fetchTrackings:h.a};t.a=Object(a.d)(m()(["item"],function(e){var t=e.item,r=p()(t,"shipping.service.trackingCodes[0]","").split(":").pop().trim();return{trackingCode:r||void 0}}),Object(c.connect)(function(e,t){return{trackingNumberIsLoading:Object(b.a)(e,t.trackingCode),trackingNumberDetails:Object(b.b)(e,t.trackingCode)}},N),l()("account.orders"))(C)},3068:function(e,t,r){"use strict";r.d(t,"b",function(){return c}),r.d(t,"a",function(){return s});var n=r(3),i=r.n(n),o=r(406),a=function(e){return e.account.trackings},c=function(e,t){return i()(a(e),"trackingNumberDetails["+t+"]")},s=function(e,t){return i()(a(e),"trackingsFetchStatus["+Object(o.a)(t)+"].isLoading",!1)}},3069:function(e,t){e.exports={wrapper:"_3Qd1W",line:"_1x1dW",lineTitle:"_12CtO",lineContent:"v7l_N",trackingLink:"_2mCH4",underlineLink:"_3PVUQ",emptyTracking:"_1zWtN",listing:"_2Isy7"}},3350:function(e,t,r){"use strict";var n,i=r(0),o=(r.n(i),r(1)),a=(r.n(o),r(7)),c=r.n(a),s=r(4),l=r(6),u=r(1009),d=r(3),p=r.n(d),f=r(176),m=r.n(f),v=r(2998),g=r(601),h=r(15),b=r(3026),y=r(598),_=r(97),k=r(3067),w=r(994),O=r(28),C=r(1038),N=r.n(C),T=r(3351),j=r.n(T),L=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,i){var o=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={}),t&&o)for(var c in o)void 0===t[c]&&(t[c]=o[c]);else t||(t=o||{});if(1===a)t.children=i;else if(a>1){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+3];t.children=s}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),S=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var D=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._handleOnToggle=r._handleOnToggle.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["PureComponent"]),S(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.item;(0,e.loadOrderDetailWithCache)(t.id)}},{key:"render",value:function(){var e=this.props,t=e.item,r=e.p.t,n=e.subfolder,i=new Date(t.createdAt),o=Object(v.a)(i,n),a=i.toLocaleString(void 0,{month:"2-digit",day:"2-digit"});return L("ul",{className:j.a.orderItemWrapper},void 0,L("li",{className:j.a.orderItemColumn,"data-test":"orderHistory-date"},void 0,r("header-date"),this.renderDetail(o,a)),L("li",{className:j.a.orderItemColumn,"data-test":"orderHistory-id"},void 0,r("header-number"),this.renderDetail(t.id)),L("li",{className:j.a.orderItemColumn,"data-test":"orderHistory-status"},void 0,r("status"),":",this.renderDetail(r("status."+m()(t.status),{_:t.status})),this.renderTracking()),L(w.a,{min:"md"},void 0,L("li",{className:j.a.orderItemColumn},void 0,L(_.a,{className:j.a.linkText,onClick:this._handleOnToggle},void 0,r("view-details")))),L(w.a,{max:"sm"},void 0,L(_.a,{className:j.a.mobileRightArrowWrapper,onClick:this._handleOnToggle},void 0,L(O.a,{className:j.a.mobileRightArrow,title:"details",alt:"details",svg:N.a}))))}},{key:"renderTracking",value:function(){var e=this.props.details,t=e.merchantIds,r=e.merchantsItems;return t&&t.map(function(e){var t=r[e],n=p()(t[0],"shipping.service"),i=p()(n,"trackingCodes[0]","").split(":").pop().trim();return n&&i?L("div",{className:j.a.trackingWrapper},e.toString(),n.name,":",L(k.a,{item:t[0],isOrderListing:!0,wrapperClassName:j.a.trackingLine})):null})}},{key:"renderDetail",value:function(e,t){return L("span",{className:j.a.orderItemValue},void 0,Object(u.b)({xs:t},e))}},{key:"_handleOnToggle",value:function(){this.props.onToggle()}}]),t}(),I={loadOrderDetailWithCache:y.c,fetchTrackings:b.a};t.a=Object(l.d)(Object(s.connect)(function(){var e=Object(g.f)({ignoreRepeatedSizes:!0});return function(t,r){var n=r.item.id;return{details:e(t,{orderId:n}),subfolder:h.d.getAppSubfolder(t)}}},I),c()("account.orders"))(D)},3351:function(e,t){e.exports={orderItemWrapper:"_3fRqK",orderItemColumn:"_3_e23",orderItemColumnDate:"_1h3C",orderItemColumnTracking:"_2_Cls",orderItemValue:"_3Kwd_",orderItemOpen:"_3FRFw",viewDetails:"_3sSBC",orderDetailsWrapper:"_375Zs",closeButtonWrapper:"_2iiPZ",closeButtonWrapperMobile:"_3-vGD",closeButton:"IeEN8",loaderBounce:"_2ZXmC",linkText:"_3Zj8A",trackingLine:"_26Ohd",mobileRightArrowWrapper:"_2yc0b",mobileRightArrow:"_35qY6",orderDetailLoading:"_36xFZ"}},3352:function(e,t){e.exports={wrapper:"_2v_qr",infoTitle:"_2XNhM",orderHeader:"_1fnXS",orderHeaderColumn:"eCHp0",orderHeaderColumnDate:"_16k5-",orderHeaderColumnTracking:"_2u3Ax",emptyOrders:"_9B6-t"}}});